{% assign p = include.project %}

<!-- YENİ DEBUG SATIRI BAŞLANGICI -->
<!-- DEBUG in project_card.html: Received include.lang = {{ include.lang | inspect }} -->
{% assign card_lang = include.lang %}
<!-- DEBUG in project_card.html: Assigned card_lang = {{ card_lang | inspect }} -->
<!-- YENİ DEBUG SATIRI SONU -->

{% assign card_s = include.s %}


<!-- DEBUG: Project Card Data - ID: {{ p.id | slugify | inspect }}, Lang (from card_lang variable): {{ card_lang | inspect }} -->
<div class="card-hover bg-ctp-surface0 rounded-2xl overflow-hidden glow-effect cursor-pointer"
     onclick="console.log('CARD CLICKED! ID: {{ p.id | slugify }}, Lang passed to JS: {{ card_lang }}'); openProjectModal('{{ p.id | slugify }}', '{{ card_lang }}');">
    <div class="h-48 bg-gradient-to-br from-{{ p.image_gradient_from | default: 'ctp-blue' }} to-{{ p.image_gradient_to | default: 'ctp-sapphire' }} relative overflow-hidden">
        <div class="absolute inset-0 bg-black/20"></div>
        <div class="absolute bottom-4 left-4 text-white">
            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                {% if p.icon_svg_path %}
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path d="{{ p.icon_svg_path }}"></path>
                </svg>
                {% else %}
                 <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path></svg>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="p-6">
        <h3 class="text-xl font-semibold mb-2 text-ctp-text">{{ p.title | default: "Proje Başlığı Eksik" }}</h3>
        <p class="text-ctp-subtext1 mb-4 text-sm">
            {{ p.short_description | default: "Kısa açıklama eksik." }}
        </p>
        <div class="flex flex-wrap gap-2">
            {% for tag_item in p.tags limit:3 %}
            <span class="px-3 py-1 bg-ctp-blue/20 text-ctp-blue rounded-full text-xs">{{ tag_item }}</span>
            {% endfor %}
            {% if p.tags == nil or p.tags.size == 0 %}
             <span class="px-3 py-1 bg-ctp-overlay0/20 text-ctp-overlay0 rounded-full text-xs">Etiket Yok</span>
            {% endif %}
        </div>
    </div>
</div>